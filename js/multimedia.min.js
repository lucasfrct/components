let media=function($source){let $that=this;let $audio=null;let $proprieties={volume:1,play:false,loop:false,count:0,};let $time={init:0,end:null,current:null,duration:null,};let $fade={input:3,output:3,init:null,end:null,modInput:null,modOutput:null,};String.prototype.removeSpaces=function(){let $vlr=this;while($vlr.indexOf(" ")!=-1){$vlr=$vlr.replace(" ","");};return $vlr.replace('.mp3',"");};$that.id='audio-'+$source.removeSpaces()+'-au';$that.title=$source.charAt(7);$that.idTitle=null;$that.idTime=null;$that.idDuration=null;$that.idVolume=null;$that.idRepeat=null;$that.idfade=null;$that.gain=null;$that.exec=null;let create=function($id=null,$src=null){let $aud=null;let $au=document.createElement('audio');$au.id=$id;$au.src=$src;$au.style='display: none;';document.body.appendChild($au);$aud=document.getElementById($id);$aud.preload='metadata';return $aud;};$audio=create($that.id,$source);$that.parseToHours=function($seconds=0){let $time=[];let $format=[];let pad=function($number){return($number<10)?"0"+$number:$number;};$time.push(Math.floor($seconds/(3600*24)));$time.push(Math.floor($seconds%(3600*24)/3600));$time.push(Math.floor(($seconds%3600)/60));$time.push(Math.floor($seconds%60));$format=$time.filter(function($item,$index){return($index>1||$item>0);}).map(function($item,$index){return pad($item);}).join(':');return $format;};$that.parseToSeconds=function($time=0){let $seconds=0;if(isNaN($time)){let $timeArray=$time.split(':').reverse();let $sec=($timeArray[0])?$timeArray[0]:0;let $minutes=($timeArray[1])?$timeArray[1]:0;let $hours=($timeArray[2])?$timeArray[2]:0;let $day=($timeArray[3])?$timeArray[3]:0;$seconds=Math.floor(Number($day*24*3600)+Number($hours*3600)+Number($minutes*60)+Number($sec));}else{$seconds=$time;};return $seconds;};$that.parseToVolume=function($percent=0){let $volume=($percent>0)?($percent/100):0;return $volume.toFixed(2);};$that.parseToPercent=function($volume=0){let $percent=($volume>0)?($volume*100):0;return $percent;};$that.fadeCalculator=function($time=3){return(1/($time*3.5));};$audio.onloadstart=function(){};$audio.onprogress=function(){};$audio.onplay=function(){$proprieties.play=true;$audio.volume=$proprieties.volume;};$audio.onpause=function(){$proprieties.play=false;$proprieties.volume=$audio.volume;};$audio.onseeking=function(){};$audio.onvolumechange=function(){$proprieties.volume=$audio.volume;if($that.idVolume){document.getElementById($that.idVolume).innerHTML=$that.parseToPercentLog($proprieties.volume);};};$audio.ondurationchange=function(){$time.duration=($time.duration)?$time.duration:$audio.duration;$time.end=($time.end)?$time.end:$time.duration;if($fade.modInput){$fade.init=$time.init;};if($fade.modOutput){$fade.end=($time.end-$fade.output);};if($that.idTitle){document.getElementById($that.idTitle).innerHTML=$that.title;};if($that.idTime){document.getElementById($that.idTime).innerHTML=$that.parseToHours($time.current);};if($that.idDuration){document.getElementById($that.idDuration).innerHTML=$that.parseToHours($time.duration);};if($that.idVolume){document.getElementById($that.idVolume).innerHTML=$that.parseToPercentLog($proprieties.volume);};if($that.idRepeat){document.getElementById($that.idRepeat).innerHTML=$time.loop;};if($that.idFade){document.getElementById($that.idFade).innerHTML=String($fade.input+", "+$fade,output);};};$audio.ontimeupdate=function(){$time.current=$audio.currentTime;if($time.current>=$time.end){if($proprieties.count<$proprieties.loop){$that.init($time.init);$proprieties.count++;}else{$audio.pause();$that.init($time.init);};};if($fade.modInput&&$that.gain<1){};if($fade.modOutput&&$time.current>$fade.end){};if($that.idTime){document.getElementById($that.idTime).innerHTML=$that.parseToHours($time.current);};};$that.play=function($init=0){($init)?$that.init($that.parseToSeconds($init)):'';$audio.play();return $that;};$that.pause=function($end=null){($end)?$that.end($that.parseToSeconds($end)):$audio.pause();return $that;};$that.stop=function($end=null){if($end){$that.end($that.parseToSeconds($end));}else{$audio.pause();$that.init($time.init);};return $that;};$that.time=function($setTime=null){let $return=null;if($setTime){let $time=$that.parseToSeconds($setTime);$time.current=$time;$audio.currentTime=$time;$return=$that;}else{$return=$audio.currentTime;};return $return;};$that.duration=function($duration=null){let $return=null;if($duration){$duration=$that.parseToSeconds($duration);$time.duration=($time.init<$duration&&$time.end<$duration)?$duration:$audio.duration;$time.end=$time.duration;$return=$that;}else{$time.duration=$audio.duration;$return=$that.parseToHours($time.duration);};return $return;};$that.init=function($init=0){if($init){$time.init=$that.parseToSeconds($init);$time.current=$time.init;$audio.currentTime=$time.init;};return $that;};$that.end=function($end=null){($end)?$time.end=$that.parseToSeconds($end):'';return $that;}
$that.vol=function($percent=null){let $return=null;if($percent){$proprieties.volume=$that.parseToVolume($percent);$audio.volume=$proprieties.volume;$return=$that;}else{$proprieties.volume=$audio.volume;$return=$that.parseToPercent($proprieties.volume);};return $return;};$that.repeat=function($number=0){$proprieties.loop=($number)?$number:10000;return $that;};$that.showTitle=function($idTitle=null){$that.idTitle=$idTitle;return $that;};$that.showTime=function($idTime=null){$that.idTime=$idTime
return $that;};$that.showDuration=function($idDuration=null){$that.idDuration=$idDuration;return $that;};$that.showVolume=function($idVolume=null){$that.idVolume=$idVolume;if($that.idVolume){document.getElementById($that.idVolume).innerHTML=$that.parseToPercentLog($proprieties.volume);};return $that;};$that.fadeIn=function($time=3){};$that.fadeOut=function($time=3){};return $that;};